<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Page</title>
    <style>
        body, button, textarea  {
            font-family: 'Times New Roman', Times, serif;
        }
        #answer-form {
            display: flex;
            flex-direction: column;
            width: 100%;
            max-width: 600px;
            margin: auto;
        }
        #answer {
            width: 100%;
            height: 150px;
            padding: 10px;
            font-size: 16px;
            margin-bottom: 10px;
        }
        #submit-button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
        #submitted-answer {
            margin-top: 20px;
        }
        #selected-image {
            display: block;
            margin: 20px auto;
            width: auto;
            height: 221px;
        }
    </style>
</head>
<body>
    <h3>Image and Question</h3>
    <div id="image-container">
        <img id="selected-image" src="" alt="Selected Image">
    </div>
    <form id="answer-form">
        <div for="answer" id="assigned-question"></div>
        <textarea id="answer" name="answer" required></textarea>
        <button id="submit-button" type="submit">
            <span style="font-size: 20px;">Save</span> 
            <br>
            <span style="font-size: 15px;">(please click "complete" at the main page to submit all your answers)</span>
        </button>
    </form>
    <div id="submitted-answer"></div>

    <script type = "module">
        // data = ""
        const data2 = `Like aiming at a soccer goal, supervision goals give you and your supervisee a clear target to shoot for—have you aligned your sights together and adjusted your aims along the way?+++How do you view the purposes of supervision?+++How did you decide on the goals for supervision with this particular supervisee? How do you know if you two are on track to reach the supervision goals? 
Just as a house stands firm on its foundation, your supervision theories support the entire structure—are you building with intention and applying them consistently?+++What are your theoretical framework(s), model(s), and personal style(s) of supervision?+++How do you apply these in practice with this particular supervisee? How do you plan to grow in this area moving forward?
The family room is where connection lives—have you made this a warm space for rapport, tackled relational cracks, and chosen furniture (strategies) that fit?+++How do you build rapport and connect with your supervisee(s)?+++How is your supervisory relationship with this particular supervisee? Have you encountered any relational challenges in supervision with this supervisee? What specific strategies have you used or will you use to strengthen the relationship?
Like a playroom filled with toys for imagination, supervision can use creativity to invite new experiences—have you tried exploring and playing with new ideas?+++Have you implemented any creative, fun, hands-on, or technological strategies that you use in supervision?+++If so, please share several strategies you have used or will use with this particular supervisee and your reflection on their effectiveness. If not, do you plan to implement any activities?
Like a well-organized computer desk, your administrative systems keep supervision running smoothly—are your files in order, and how does your setup support your supervisee’s progress?+++What administrative strategies do you use to stay organized as a supervisor?+++Which of these administrative strategies have you used or will you use with this particular supervisee? What are your reflections on their effectiveness?
Before any ethical or legal injuries arise, your first aid kit must be stocked—are you prepared to respond with care, and how might you improve your readiness?+++What are some legal or ethical issues and responsibilities in supervision that you have considered or encountered?+++Please share any legal or ethical issues and responsibilities you have considered or encountered with this particular supervisee and your actions to address them. How might you continue developing in this area?
The front door symbolizes both entry and exit—how do you manage who walks through, who stays, and what tools you use for gatekeeping?+++How do you handle gatekeeping (e.g., assessment, evaluation, and remediation) as a supervisor?+++Please share several gatekeeping strategies you have used or will use with this particular supervisee. How do you plan to grow in this aspect of your supervision?
A good window lets in more than light—it offers perspective; are you making sure the view out of your window includes cultural relevance and reflection?+++What culturally relevant strategies do you use as a supervisor?+++Please share several culturally relevant strategies you have used or will use with this particular supervisee. How can you refine or build on your current approach?
Like a Wi-Fi system linking rooms and connecting to the outside world, supervision formats shape how we connect and engage—are you ensuring a strong signal during supervision?+++Did or do you provide supervision for this particular supervisee in an individual, triadic, or group format—and was it in-person, online, or hybrid?+++What are the strengths and challenges inherent in these modalities?
Just as a chimney releases smoke to keep the home breathable, what self-care vents have you installed to maintain your own well-being as a supervisor?+++What are your self-care strategies as a supervisor; how do you blow off steam?+++When working with this particular supervisee, what self-care strategies have you used or will you use as a supervisor? What strategies work well for you?
Behind the closet door lie things not often seen—are you aware of your vulnerabilities, and how do you handle them?+++What are your vulnerable areas as a supervisor; what are some things that not everyone sees?+++When working with this particular supervisee, what were or are your vulnerable areas? What have you done or will you do about them?
The bedroom is where sleepy skills—those you haven’t used much—tend to rest. How are you waking them up to grow as a supervisor?+++What are your strengths as a supervisor?+++What are your sleepy skill areas with this particular supervisee, and how do you work on them through feedback and evaluation? Can you give an example of when they got in the way of your supervision?
The exercise room is where strength is built—what are your supervisory muscles, and when have they helped lift your supervision?+++What are your strengths as a supervisor?+++What was or is your biggest strength when working with this particular supervisee? Provide an example of when this strength seemed to be helpful to this supervisee.
The roof shelters all beneath it—what personal and professional resources cover you and protect the work you do as a supervisor?+++What personal and professional resources (e.g., resources in your program, your university, and professional organizations) do you have as a supervisor?+++What personal and professional resources have you used or will you use when working with this particular supervisee? How do you plan to grow in this area moving forward?
The mirror reflects truth—how do you look into it to assess your competence, and what do you do with the feedback it shows?+++How do you obtain feedback on your supervisory competence as a supervisor?+++How did you or will you obtain feedback when working with this particular supervisee? How did you or will you incorporate that feedback to improve your supervision practice?
        `
        // const quetions = () => {
        //     return new Promise(
        //         (resolve, reject) => {
        //             fetch('questions.txt')
        //             .then(response => 
        //                 response.text())
        //                 .then(data => {
        //                     console.log(data);
        //                     const lines = data.split('\n').map( line =>
        //                         line.trim());
        //                     resolve(lines);
        //                 })
        //         }
        //     )
        // };

        const quetions = () => {
            const lines = data2.split('\n').map( line =>
                line.trim()
            )
            return lines
        };

        document.addEventListener("DOMContentLoaded", async function() {
            let lines = await quetions();
            const urlParams = new URLSearchParams(window.location.search);
            const imageName = urlParams.get('image');
            const imageIdx = imageName.split(' ')[0];
            console.log(lines[imageIdx-1]);
            document.getElementById('selected-image').src = imageName;
            const all_text = lines[imageIdx-1];
            const [analogy, item1, item2] = all_text.split("+++");
            console.log(analogy);
            document.getElementById('assigned-question').innerHTML = `
                <i>${analogy}</i>
                <ul>
                    <li>${item1}</li>
                    <li>${item2}</li>
                </ul>
            `;

            // Display submitted answer if it exists
            const submittedAnswer = localStorage.getItem('answer' + imageIdx);
            if (submittedAnswer) {
                document.getElementById('submitted-answer').innerHTML = `<p>Previously saved answer: ${submittedAnswer}</p>`;
                document.getElementById('answer').value = submittedAnswer;
            }

            document.getElementById('answer-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const answer = document.getElementById('answer').value;
                const words = answer.split(/\s+/).filter(word => word.length > 0);
                localStorage.setItem('answer' + imageIdx, answer);
                localStorage.setItem('question' + imageIdx, `${lines[imageIdx-1]}`);
                //alert('Answer saved!');
                // Update the displayed submitted answer
                document.getElementById('submitted-answer').innerHTML = `<p>Previously saved answer: ${answer}</p>`;
                document.getElementById('selected-image').style.filter = 'none'; // Remove grayscale from the image
                window.location.href = 'index_house.html';
                // if (words.length < 40) {
                //     alert(`Your input is too short! It contains ${words.length} word(s). Please enter at least 40 words or more.`);
                // }
                // else{
                //     sessionStorage.setItem('answer' + imageIdx, answer);
                //     //alert('Answer saved!');
                //     // Update the displayed submitted answer
                //     document.getElementById('submitted-answer').innerHTML = `<p>Previously saved answer: ${answer}</p>`;
                //     document.getElementById('selected-image').style.filter = 'none'; // Remove grayscale from the image
                //     window.location.href = 'index_house.html';
                // }
            });
        });
    </script>
</body>
</html>
